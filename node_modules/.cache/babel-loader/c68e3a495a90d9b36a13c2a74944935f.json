{"ast":null,"code":"import _regeneratorRuntime from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import anonymous from'./anonymous.png';var Photo=/*#__PURE__*/function(_React$Component){_inherits(Photo,_React$Component);var _super=_createSuper(Photo);function Photo(props){var _this;_classCallCheck(this,Photo);_this=_super.call(this,props);_this.getUserAvatar=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=_this.props.user;_context.prev=1;_context.next=4;return fetch(\"https://blech-task-manager.herokuapp.com/users/\".concat(user._id,\"/avatar\"),{method:'get',headers:{Authorization:\"Bearer \".concat(user.token)}}).then(function(response){if(response.status===200){_this.setState({avatar:true});}});case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);_this.setState({avatar:false});case 9:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);}));_this.onPhotoChangeClick=function(){var fileInput=document.querySelector('#myfile').files[0];var formData=new FormData();formData.append('avatar',fileInput);fetch('https://blech-task-manager.herokuapp.com/users/me/avatar',{method:'post',body:formData,headers:{Authorization:\"Bearer \".concat(_this.props.user.token)}}).then(function(response){if(response.status===200){_this.setState({avatar:true,changePhoto:false});}});};_this.onPhotoDeleteClick=function(){fetch('https://blech-task-manager.herokuapp.com/users/me/avatar',{method:'delete',headers:{Authorization:\"Bearer \".concat(_this.props.user.token)}});_this.setState({avatar:false,changePhoto:false});};_this.changePhotoToggle=function(trueOrFalse){trueOrFalse?_this.setState({changePhoto:true}):_this.setState({changePhoto:false});};_this.showUserAvater=function(){var user=_this.props.user;return _this.state.avatar?/*#__PURE__*/React.createElement(\"img\",{alt:\"\",className:\"pointer grow\",src:\"https://blech-task-manager.herokuapp.com/users/\".concat(user._id,\"/avatar\"),width:\"300px\",height:\"auto\",onClick:function onClick(){return _this.changePhotoToggle(true);}}):/*#__PURE__*/React.createElement(\"img\",{alt:\"\",className:\"pointer grow\",src:anonymous,width:\"300px\",height:\"auto\",onClick:function onClick(){return _this.changePhotoToggle(true);}});};_this.showChangePhotoForm=function(){return/*#__PURE__*/React.createElement(\"div\",{className:\"tc bg-blue dib br3 pa1 ma4 grow bw2 w-30 o-90 shadow-5\"},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"form\",{className:\"f5 white ma4\",action:\"/action_page.php\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"myfile\",name:\"myfile\"})))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue\",type:\"submit\",onClick:_this.onPhotoChangeClick},\"Update Photo\"),/*#__PURE__*/React.createElement(\"button\",{className:\"outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-pink\",type:\"delete\",onClick:_this.onPhotoDeleteClick},\"Delete Photo\"),/*#__PURE__*/React.createElement(\"button\",{className:\"outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue\",type:\"cancel\",onClick:function onClick(){return _this.changePhotoToggle(false);}},\"Cancel\"))));};_this.state={avatar:false,changePhoto:false};return _this;}_createClass(Photo,[{key:\"componentDidMount\",value:function componentDidMount(){this.getUserAvatar();}},{key:\"render\",value:function render(){var user=this.props.user;console.log('show changephoto?',this.state.changePhoto);return/*#__PURE__*/React.createElement(\"div\",{className:\"center \"},this.state.changePhoto?this.showChangePhotoForm():this.showUserAvater());}}]);return Photo;}(React.Component);export default Photo;","map":{"version":3,"sources":["/home/oz/Desktop/git/task-app-front/src/components/Photo/Photo.js"],"names":["React","anonymous","Photo","props","getUserAvatar","user","fetch","_id","method","headers","Authorization","token","then","response","status","setState","avatar","onPhotoChangeClick","fileInput","document","querySelector","files","formData","FormData","append","body","changePhoto","onPhotoDeleteClick","changePhotoToggle","trueOrFalse","showUserAvater","state","showChangePhotoForm","console","log","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport anonymous from './anonymous.png'\n\n\n\n\nclass Photo extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tavatar: false,\n\t\t\tchangePhoto: false\n\t\t}\n\t\t\n\t}\n\n\n\tgetUserAvatar = async() => {\n\t\tconst user = this.props.user\n\t\ttry {\n\t\t\tawait fetch(`https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`, {\n\t\t\tmethod: 'get',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${user.token}`\n\t\t\t}\n\t\t\t})\n\t\t\t.then(response => {\n\t\t\t\tif(response.status === 200) {\n\t\t\t\t\tthis.setState({avatar: true})\n\t\t\t\t}\n\t\t\t})\n\t\t} catch(err) {\n\t\t\tthis.setState({avatar: false})\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getUserAvatar()\n\t}\n\n\n\tonPhotoChangeClick = () => {\n\t\tconst fileInput = document.querySelector('#myfile').files[0]\n\t\tconst formData = new FormData()\n\t\tformData.append('avatar', fileInput)\n\t\tfetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n\t\t\tmethod: 'post',\n\t\t\tbody: formData,\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${this.props.user.token}`\n\t\t\t}\n\t\t})\n\t\t.then(response => {\n\t\t\tif(response.status === 200) {\n\t\t\tthis.setState({\n\t\t\t\tavatar: true,\n\t\t\t\tchangePhoto: false\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\n\tonPhotoDeleteClick = () => {\n\t\tfetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n\t\t\tmethod: 'delete',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${this.props.user.token}`\n\t\t\t}\n\t\t})\n\t\tthis.setState({\n\t\t\tavatar: false,\n\t\t\tchangePhoto: false\n\t\t})\n\n\t}\n\n\tchangePhotoToggle = (trueOrFalse) => {\n\t\t(trueOrFalse)\n\t\t?\n\t\tthis.setState({changePhoto: true})\n\t\t:\n\t\tthis.setState({changePhoto: false})\n\t}\n\n\tshowUserAvater = () => {\n\t\tconst { user } = this.props\n\t\treturn (\n\t\t\t(this.state.avatar)\n\t\t\t? \n\t\t\t<img alt='' className='pointer grow'\n\t\t\tsrc = {`https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`} \n\t\t\twidth='300px' height='auto'\n\t\t\tonClick={() => this.changePhotoToggle(true)}\n\t\t\t/>\n\t\t\t:\n\t\t\t<img alt='' className='pointer grow'\n\t\t\tsrc = {anonymous} \n\t\t\twidth='300px' height='auto'\n\t\t\tonClick={() => this.changePhotoToggle(true)}\n\t\t\t/>\n\t\t)\n\t}\n\n\tshowChangePhotoForm = () => {\n\n\t\treturn (\n\t\t\t<div className='tc bg-blue dib br3 pa1 ma4 grow bw2 w-30 o-90 shadow-5'>\n\t\t\t\t<div>\n\t\t\t\t<h4>\n\t\t\t\t\t<form className='f5 white ma4' action=\"/action_page.php\">\n\t\t\t\t  \t<input type=\"file\" id=\"myfile\" name=\"myfile\" />\n\t\t\t\t\t</form>\n\t\t\t\t</h4>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t<p>\n\t\t\t\t\t<button\n\t\t\t\t\tclassName='outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue'\n\t\t\t\t\ttype='submit'\n\t\t\t\t\tonClick={this.onPhotoChangeClick}\n\t\t\t\t\t>Update Photo</button>\n\t\t\t\t\t<button \n\t\t\t\t\tclassName='outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-pink'\n\t\t\t\t\ttype='delete'\n\t\t\t\t\tonClick={this.onPhotoDeleteClick}\n\t\t\t\t\t>Delete Photo</button>\n\t\t\t\t\t<button \n\t\t\t\t\tclassName='outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue'\n\t\t\t\t\ttype='cancel'\n\t\t\t\t\tonClick={() => this.changePhotoToggle(false)}\n\t\t\t\t\t>Cancel</button>\n\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t)\n\t}\n\n\trender() {\n\t\tconst { user } = this.props\n\t\tconsole.log('show changephoto?',this.state.changePhoto)\n\t\treturn (\n\t\t\t<div className='center '>\n\t\t\t\t{\n\t\t\t\t\t(this.state.changePhoto)\n\t\t\t\t\t?\n\t\t\t\t\tthis.showChangePhotoForm()\n\t\t\t\t\t:\n\t\t\t\t\tthis.showUserAvater()\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t</div>\n\t\n\t\t);\n\t}\n\t\n}\n\nexport default Photo\n"]},"metadata":{},"sourceType":"module"}