{"ast":null,"code":"var _jsxFileName = \"/home/oz/Desktop/git/task-app-front/src/components/Photo/Photo.js\";\nimport React from 'react';\nimport anonymous from './anonymous.png';\n\nclass Photo extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.getUserAvatar = async () => {\n      const user = this.props.user;\n\n      try {\n        await fetch(`https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`, {\n          method: 'get',\n          headers: {\n            Authorization: `Bearer ${user.token}`\n          }\n        }).then(response => {\n          if (response.status === 200) {\n            this.setState({\n              avatar: true\n            });\n          }\n        });\n      } catch (err) {\n        this.setState({\n          avatar: false\n        });\n      }\n    };\n\n    this.onPhotoChangeClick = async () => {\n      const fileInput = document.querySelector('#myfile').files[0];\n      const formData = new FormData();\n      this.setState({\n        uploadingText: 'Uploading...',\n        errorText: ''\n      });\n      formData.append('avatar', fileInput);\n      let result = await fetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n        method: 'post',\n        body: formData,\n        headers: {\n          Authorization: `Bearer ${this.props.user.token}`\n        }\n      });\n\n      if (result.status === 200) {\n        this.setState({\n          avatar: true,\n          changePhoto: false\n        });\n      } else {\n        let jsonRes = await result.json();\n        this.setState({\n          errorText: jsonRes.error\n        });\n      }\n\n      this.setState({\n        uploadingText: ''\n      });\n    };\n\n    this.onPhotoDeleteClick = () => {\n      fetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n        method: 'delete',\n        headers: {\n          Authorization: `Bearer ${this.props.user.token}`\n        }\n      });\n      this.setState({\n        avatar: false,\n        changePhoto: false,\n        errorText: ''\n      });\n    };\n\n    this.changePhotoToggle = trueOrFalse => {\n      trueOrFalse ? this.setState({\n        changePhoto: true\n      }) : this.setState({\n        changePhoto: false,\n        errorText: ''\n      });\n    };\n\n    this.showUserAvater = () => {\n      const {\n        user\n      } = this.props;\n      return this.state.avatar ? /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"\",\n        className: \"pointer grow\",\n        src: `https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`,\n        width: \"300px\",\n        height: \"auto\",\n        onClick: () => this.changePhotoToggle(true),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 4\n        }\n      }) : /*#__PURE__*/React.createElement(\"img\", {\n        alt: \"\",\n        className: \"pointer grow\",\n        src: anonymous,\n        width: \"300px\",\n        height: \"auto\",\n        onClick: () => this.changePhotoToggle(true),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 4\n        }\n      });\n    };\n\n    this.showChangePhotoForm = () => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pt3 black-80 flex justify-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"measure\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        className: \"f7 white ma4\",\n        action: \"/action_page.php\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"myfile\",\n        name: \"myfile\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 8\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pb6 black-80 flex justify-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue\",\n        type: \"submit\",\n        onClick: this.onPhotoChangeClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 6\n        }\n      }, \"Update Photo\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-pink\",\n        type: \"delete\",\n        onClick: this.onPhotoDeleteClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 6\n        }\n      }, \"Delete Photo\"), /*#__PURE__*/React.createElement(\"button\", {\n        className: \"outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue\",\n        type: \"cancel\",\n        onClick: () => this.changePhotoToggle(false),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 6\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"black pa1 mv1 black-80\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 6\n        }\n      }, this.state.uploadingText), /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"red pa1 mv1 black-80\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 6\n        }\n      }, this.state.errorText))));\n    };\n\n    this.state = {\n      avatar: false,\n      changePhoto: false,\n      errorText: '',\n      uploadingText: ''\n    };\n  }\n\n  componentDidMount() {\n    this.getUserAvatar();\n  }\n\n  render() {\n    const {\n      user\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"center \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 4\n      }\n    }, this.state.changePhoto ? this.showChangePhotoForm() : this.showUserAvater());\n  }\n\n}\n\nexport default Photo;","map":{"version":3,"sources":["/home/oz/Desktop/git/task-app-front/src/components/Photo/Photo.js"],"names":["React","anonymous","Photo","Component","constructor","props","getUserAvatar","user","fetch","_id","method","headers","Authorization","token","then","response","status","setState","avatar","err","onPhotoChangeClick","fileInput","document","querySelector","files","formData","FormData","uploadingText","errorText","append","result","body","changePhoto","jsonRes","json","error","onPhotoDeleteClick","changePhotoToggle","trueOrFalse","showUserAvater","state","showChangePhotoForm","componentDidMount","render"],"mappings":"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","sourcesContent":["import React from 'react'\nimport anonymous from './anonymous.png'\n\n\n\n\nclass Photo extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tavatar: false,\n\t\t\tchangePhoto: false,\n\t\t\terrorText: '',\n\t\t\tuploadingText: ''\n\t\t}\n\t\t\n\t}\n\n\n\tgetUserAvatar = async() => {\n\t\tconst user = this.props.user\n\t\ttry {\n\t\t\tawait fetch(`https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`, {\n\t\t\tmethod: 'get',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${user.token}`\n\t\t\t}\n\t\t\t})\n\t\t\t.then(response => {\n\t\t\t\tif(response.status === 200) {\n\t\t\t\t\tthis.setState({avatar: true})\n\t\t\t\t}\n\t\t\t})\n\t\t} catch(err) {\n\t\t\tthis.setState({avatar: false})\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getUserAvatar()\n\t}\n\n\n\tonPhotoChangeClick = async () => {\n\t\tconst fileInput = document.querySelector('#myfile').files[0]\n\t\tconst formData = new FormData()\n\t\tthis.setState({\n\t\t\tuploadingText: 'Uploading...',\n\t\t\terrorText: ''\n\t\t})\n\t\tformData.append('avatar', fileInput)\n\t\tlet result = await fetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n\t\t\tmethod: 'post',\n\t\t\tbody: formData,\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${this.props.user.token}`\n\t\t\t}\n\t\t})\t\n\t\tif(result.status === 200) {\n\t\tthis.setState({\n\t\t\tavatar: true,\n\t\t\tchangePhoto: false\n\t\t\t})\n\t\t} else {\n\t\t\tlet jsonRes = await result.json()\n\t\t\tthis.setState({errorText: jsonRes.error})\n\t\t}\n\t\tthis.setState({uploadingText: ''})\n\t}\n\n\tonPhotoDeleteClick = () => {\n\t\tfetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n\t\t\tmethod: 'delete',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${this.props.user.token}`\n\t\t\t}\n\t\t})\n\t\tthis.setState({\n\t\t\tavatar: false,\n\t\t\tchangePhoto: false,\n\t\t\terrorText: ''\n\t\t})\n\n\t}\n\n\tchangePhotoToggle = (trueOrFalse) => {\n\t\t(trueOrFalse)\n\t\t?\n\t\tthis.setState({changePhoto: true})\n\t\t:\n\t\tthis.setState({\n\t\t\tchangePhoto: false,\n\t\t\terrorText: ''\n\t\t})\n\t}\n\n\tshowUserAvater = () => {\n\t\tconst { user } = this.props\n\t\treturn (\n\t\t\t(this.state.avatar)\n\t\t\t? \n\t\t\t<img alt='' className='pointer grow'\n\t\t\tsrc = {`https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`} \n\t\t\twidth='300px' height='auto'\n\t\t\tonClick={() => this.changePhotoToggle(true)}\n\t\t\t/>\n\t\t\t:\n\t\t\t<img alt='' className='pointer grow'\n\t\t\tsrc = {anonymous} \n\t\t\twidth='300px' height='auto'\n\t\t\tonClick={() => this.changePhotoToggle(true)}\n\t\t\t/>\n\t\t)\n\t}\n\n\tshowChangePhotoForm = () => {\n\n\t\treturn (\n\t\t\t<div>\n\t\t\t<div className=\"pt3 black-80 flex justify-center\">\n\t\t\t\t<div className=\"measure\">\n\t\t\t\t\t<form className='f7 white ma4' action=\"/action_page.php\">\n\t\t\t\t  \t<input type=\"file\" id=\"myfile\" name=\"myfile\" />\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"pb6 black-80 flex justify-center\">\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\tclassName='outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue'\n\t\t\t\t\ttype='submit'\n\t\t\t\t\tonClick={this.onPhotoChangeClick}\n\t\t\t\t\t>Update Photo</button>\n\t\t\t\t\t<button \n\t\t\t\t\tclassName='outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-pink'\n\t\t\t\t\ttype='delete'\n\t\t\t\t\tonClick={this.onPhotoDeleteClick}\n\t\t\t\t\t>Delete Photo</button>\n\t\t\t\t\t<button \n\t\t\t\t\tclassName='outline w-15 f6 link dim ph3 pv2 mb2 dib white bg-dark-blue'\n\t\t\t\t\ttype='cancel'\n\t\t\t\t\tonClick={() => this.changePhotoToggle(false)}\n\t\t\t\t\t>Cancel</button>\n\t\t\t\t\t<h6 className='black pa1 mv1 black-80'>{this.state.uploadingText}</h6>\n\t\t\t\t\t<h6 className='red pa1 mv1 black-80'>{this.state.errorText}</h6>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t\n\t\t)\n\t}\n\n\trender() {\n\t\tconst { user } = this.props\n\t\treturn (\n\t\t\t<div className='center '>\n\t\t\t\t{\n\t\t\t\t\t(this.state.changePhoto)\n\t\t\t\t\t?\n\t\t\t\t\tthis.showChangePhotoForm()\n\t\t\t\t\t:\n\t\t\t\t\tthis.showUserAvater()\t\t\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t</div>\n\t\n\t\t);\n\t}\n\t\n}\n\nexport default Photo\n"]},"metadata":{},"sourceType":"module"}