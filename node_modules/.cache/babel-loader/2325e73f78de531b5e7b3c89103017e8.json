{"ast":null,"code":"import _regeneratorRuntime from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import anonymous from'./anonymous.png';var Photo=/*#__PURE__*/function(_React$Component){_inherits(Photo,_React$Component);var _super=_createSuper(Photo);function Photo(props){var _this;_classCallCheck(this,Photo);_this=_super.call(this,props);_this.getUserAvatar=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=_this.props.user;// console.log(user._id)\n_context.prev=1;_context.next=4;return fetch(\"https://blech-task-manager.herokuapp.com/users/\".concat(user._id,\"/avatar\"),{method:'get',headers:{Authorization:\"Bearer \".concat(user.token)}}).then(function(response){if(response.status===200){_this.setState({avatar:true});}});case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](1);_this.setState({avatar:false});case 9:case\"end\":return _context.stop();}}},_callee,null,[[1,6]]);}));_this.onPhotoChangeClick=function(){// console.log(document.querySelector('#myfile').files[0])\nvar fileInput=document.querySelector('#myfile').files[0];var formData=new FormData();formData.append('avatar',fileInput);fetch('https://blech-task-manager.herokuapp.com/users/me/avatar',{method:'post',body:formData,headers:{Authorization:\"Bearer \".concat(_this.props.user.token)}}).then(function(response){if(response.status===200){_this.setState({avatar:true});}});};_this.onPhotoDeleteClick=function(){fetch('https://blech-task-manager.herokuapp.com/users/me/avatar',{method:'delete',headers:{Authorization:\"Bearer \".concat(_this.props.user.token)}});_this.setState({avatar:false});};_this.state={avatar:false};return _this;}_createClass(Photo,[{key:\"componentDidMount\",value:function componentDidMount(){this.getUserAvatar();}},{key:\"render\",value:function render(){var user=this.props.user;return/*#__PURE__*/React.createElement(\"div\",null,this.state.avatar?/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:\"https://blech-task-manager.herokuapp.com/users/\".concat(user._id,\"/avatar\"),width:\"300px\",height:\"auto\"}):/*#__PURE__*/React.createElement(\"img\",{alt:\"\",src:anonymous,width:\"300px\",height:\"auto\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"form\",{className:\"center f5 ph3 pv white\",action:\"/action_page.php\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"myfile\",name:\"myfile\"}),/*#__PURE__*/React.createElement(\"br\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"flex justify-center \"},/*#__PURE__*/React.createElement(\"button\",{className:\"outline w-20 ph3 link dim f6 ph3 pv2 mb2 dib white bg-navy\",type:\"submit\",onClick:this.onPhotoChangeClick},\"Update Photo\"),/*#__PURE__*/React.createElement(\"button\",{className:\"outline w-20 f6 ph3 link dim ph3 pv2 mb2 dib white bg-dark-pink\",type:\"delete\",onClick:this.onPhotoDeleteClick},\"Delete Photo\")));}}]);return Photo;}(React.Component);export default Photo;","map":{"version":3,"sources":["/home/oz/Desktop/git/task-app-front/src/components/Photo/Photo.js"],"names":["React","anonymous","Photo","props","getUserAvatar","user","fetch","_id","method","headers","Authorization","token","then","response","status","setState","avatar","onPhotoChangeClick","fileInput","document","querySelector","files","formData","FormData","append","body","onPhotoDeleteClick","state","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport anonymous from './anonymous.png'\n\n\n\n\nclass Photo extends React.Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tavatar: false\n\t\t}\n\t\t\n\t}\n\n\n\tgetUserAvatar = async() => {\n\t\tconst user = this.props.user\n\t\t// console.log(user._id)\n\t\ttry {\n\t\t\tawait fetch(`https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`, {\n\t\t\tmethod: 'get',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${user.token}`\n\t\t\t}\n\t\t\t})\n\t\t\t.then(response => {\n\t\t\t\tif(response.status === 200) {\n\t\t\t\t\tthis.setState({avatar: true})\n\t\t\t\t}\n\t\t\t})\n\t\t} catch(err) {\n\t\t\tthis.setState({avatar: false})\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.getUserAvatar()\n\t}\n\n\n\tonPhotoChangeClick = () => {\n\t\t// console.log(document.querySelector('#myfile').files[0])\n\t\tconst fileInput = document.querySelector('#myfile').files[0]\n\t\tconst formData = new FormData()\n\t\tformData.append('avatar', fileInput)\n\t\tfetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n\t\t\tmethod: 'post',\n\t\t\tbody: formData,\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${this.props.user.token}`\n\t\t\t}\n\t\t})\n\t\t.then(response => {\n\t\t\tif(response.status === 200) {\n\t\t\tthis.setState({avatar: true})\n\t\t\t}\n\t\t})\n\t}\n\n\tonPhotoDeleteClick = () => {\n\t\tfetch('https://blech-task-manager.herokuapp.com/users/me/avatar', {\n\t\t\tmethod: 'delete',\n\t\t\theaders: {\n\t\t\t\tAuthorization: `Bearer ${this.props.user.token}`\n\t\t\t}\n\t\t})\n\t\tthis.setState({avatar: false})\n\n\t}\n\n\trender() {\n\t\tconst { user } = this.props\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t{\n\t\t\t\t\t(this.state.avatar) \n\t\t\t\t\t? \n\t\t\t\t\t<img alt='' \n\t\t\t\t\tsrc = {`https://blech-task-manager.herokuapp.com/users/${user._id}/avatar`} \n\t\t\t\t\twidth='300px' height='auto'/>\n\t\t\t\t\t:\n\t\t\t\t\t<img alt='' \n\t\t\t\t\tsrc = {anonymous} \n\t\t\t\t\twidth='300px' height='auto'/>\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t<br/>\n\t\t\t\t<form className='center f5 ph3 pv white' action=\"/action_page.php\">\n\t\t\t\t  <input type=\"file\" id=\"myfile\" name=\"myfile\" /><br/>\n\t\t\t\t</form>\n\t\t\t\t<div className='flex justify-center '>\n\t\t\t\t\t<button \n\t\t\t\t\tclassName='outline w-20 ph3 link dim f6 ph3 pv2 mb2 dib white bg-navy'\n\t\t\t\t\ttype='submit'\n\t\t\t\t\tonClick={this.onPhotoChangeClick}\n\t\t\t\t\t>Update Photo</button>\n\t\t\t\t\t<button \n\t\t\t\t\tclassName='outline w-20 f6 ph3 link dim ph3 pv2 mb2 dib white bg-dark-pink'\n\t\t\t\t\ttype='delete'\n\t\t\t\t\tonClick={this.onPhotoDeleteClick}\n\t\t\t\t\t>Delete Photo</button>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t</div>\n\t\t);\n\t}\n\t\n}\n\nexport default Photo\n"]},"metadata":{},"sourceType":"module"}