{"ast":null,"code":"import _classCallCheck from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/oz/Desktop/git/task-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import Photo from'../Photo/Photo';import Tasks from'../Tasks/Tasks';var Profile=/*#__PURE__*/function(_React$Component){_inherits(Profile,_React$Component);var _super=_createSuper(Profile);function Profile(props){var _this;_classCallCheck(this,Profile);_this=_super.call(this,props);_this.onNameChange=function(event){_this.setState({nameInput:event.target.value});};_this.onEmailChange=function(event){_this.setState({emailInput:event.target.value});};_this.onAgeChange=function(event){_this.setState({ageInput:event.target.value});};_this.deleteUser=function(){var _this$props=_this.props,onRouteChange=_this$props.onRouteChange,user=_this$props.user;fetch('https://blech-task-manager.herokuapp.com/users/me/',{method:'delete',headers:{'content-type':'application/json',Authorization:\"Bearer \".concat(user.token)}}).then(function(response){return response.json();}).then(function(jsonResponse){console.log(jsonResponse);if(jsonResponse._id){onRouteChange('signout');}});};_this.showUserDetails=function(){var user=_this.props.user;return/*#__PURE__*/React.createElement(\"article\",{className:\"grow pointer mw5 center br3 pa4-ns mv3 b--black-10\",onClick:function onClick(){return _this.setState({showEditUser:true});}},/*#__PURE__*/React.createElement(\"div\",{className:\"tc\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"f3 mb2\"},\"\".concat(user.name)),/*#__PURE__*/React.createElement(\"h2\",{className:\"f5 fw4 black mt0\"},\"email: \".concat(user.email)),/*#__PURE__*/React.createElement(\"h2\",{className:\"f5 fw4 black mt0\"},\"age: \".concat(user.age))));};_this.onSubmitUpdate=function(){var user=_this.props.user;var _this$state=_this.state,nameInput=_this$state.nameInput,emailInput=_this$state.emailInput,ageInput=_this$state.ageInput;if(nameInput==='')nameInput=user.name;if(emailInput==='')emailInput=user.email;if(ageInput==='')ageInput=user.age;fetch(\"https://blech-task-manager.herokuapp.com/users/me\",{method:'PATCH',headers:{'content-type':'application/json; charset=UTF-8',Authorization:\"Bearer \".concat(user.token)},body:JSON.stringify({name:nameInput,email:emailInput,age:ageInput})}).then(function(response){return response.json();}).then(function(jsonData){if(jsonData._id){console.log(jsonData);_this.props.loadUser(jsonData,user.token);_this.setState({showEditUser:false});}else{if(jsonData.errors.email){_this.setState({emailErrorMessage:jsonData.errors.email.message});}if(jsonData.errors.age){_this.setState({ageErrorMessage:'Age must be a number'});}console.log(jsonData.errors);}});};_this.showUserEditForm=function(){var user=_this.props.user;return/*#__PURE__*/React.createElement(\"div\",{className:\"pa4 black-80 flex justify-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"measure\"},/*#__PURE__*/React.createElement(\"label\",{form:\"userDetails\",className:\"f6 b db mb2\"},\"Update User\"),/*#__PURE__*/React.createElement(\"input\",{id:\"name123\",className:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",onChange:_this.onNameChange,placeholder:user.name}),/*#__PURE__*/React.createElement(\"input\",{id:\"email\",className:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",onChange:_this.onEmailChange,placeholder:user.email}),/*#__PURE__*/React.createElement(\"input\",{id:\"age\",className:\"input-reset ba b--black-20 pa2 mb2 db w-100\",type:\"text\",onChange:_this.onAgeChange,placeholder:user.age}),/*#__PURE__*/React.createElement(\"button\",{className:\"ph3 link dim f6 ph3 pv2 mb2 dib white bg-navy\",type:\"update\",onClick:function onClick(){return _this.onSubmitUpdate();}},\"Update\"),/*#__PURE__*/React.createElement(\"h6\",{className:\"red pa0 black-80\"},_this.state.emailErrorMessage),/*#__PURE__*/React.createElement(\"h6\",{className:\"red pa0\"},_this.state.ageErrorMessage)));};_this.state={nameInput:'',emailInput:'',ageInput:'',showEditUser:false,ageErrorMessage:'',emailErrorMessage:''};return _this;}_createClass(Profile,[{key:\"render\",value:function render(){var user=this.props.user;return/*#__PURE__*/React.createElement(\"div\",null,this.state.showEditUser?this.showUserEditForm():this.showUserDetails(),/*#__PURE__*/React.createElement(Photo,{user:user}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Tasks,{user:user}),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"w-30 grow f4 link ph3 pv dib white bg-light-purple\",onClick:this.deleteUser},\"Delete User\")));}}]);return Profile;}(React.Component);export default Profile;","map":{"version":3,"sources":["/home/oz/Desktop/git/task-app-front/src/components/Profile/Profile.js"],"names":["React","Photo","Tasks","Profile","props","onNameChange","event","setState","nameInput","target","value","onEmailChange","emailInput","onAgeChange","ageInput","deleteUser","onRouteChange","user","fetch","method","headers","Authorization","token","then","response","json","jsonResponse","console","log","_id","showUserDetails","showEditUser","name","email","age","onSubmitUpdate","state","body","JSON","stringify","jsonData","loadUser","errors","emailErrorMessage","message","ageErrorMessage","showUserEditForm","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Photo from '../Photo/Photo'\nimport Tasks from '../Tasks/Tasks'\n\n\nclass Profile extends React.Component  {\n\t\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\tnameInput:'',\n\t\t\temailInput: '',\n\t\t\tageInput: '',\n\t\t\tshowEditUser: false,\n\t\t\tageErrorMessage: '',\n\t\t\temailErrorMessage: ''\n\t\t}\n\t}\n\n\tonNameChange = (event) => {\n\t\tthis.setState({nameInput: event.target.value})\n\t}\n\tonEmailChange = (event) => {\n\t\tthis.setState({emailInput: event.target.value})\n\t}\n\tonAgeChange = (event) => {\n\t\tthis.setState({ageInput: event.target.value})\n\t}\n\n\tdeleteUser = () => {\n\t\tconst { onRouteChange, user } = this.props\n\t\tfetch('https://blech-task-manager.herokuapp.com/users/me/', {\n\t\t\tmethod: 'delete',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json',\n\t\t\t\tAuthorization: `Bearer ${user.token}`\n\t\t\t}\n\t\t\t\n\t\t})\n\t\t.then(response => response.json())\n\t\t.then(jsonResponse => {\n\t\t\tconsole.log(jsonResponse)\n\t\t\tif(jsonResponse._id) {\n\t\t\t\tonRouteChange('signout')\n\t\t\t}\n\t\t})\t\n\t}\n\n\tshowUserDetails = () => {\n\t\tconst { user } = this.props\n\t\treturn(\n\t\t\t<article \n\t\t\tclassName = 'grow pointer mw5 center br3 pa4-ns mv3 b--black-10'\n\t\t\tonClick={()=> this.setState({showEditUser: true})}\n\t\t\t>\n\t\t\t\t<div className = 'tc'>\n\t\t\t\t\t<h1 className = 'f3 mb2'>{`${user.name}`}</h1>\n\t\t\t\t\t<h2 className = 'f5 fw4 black mt0'>{`email: ${user.email}`}</h2>\n\t\t\t\t\t<h2 className = 'f5 fw4 black mt0'>{`age: ${user.age}`}</h2>\n\t\t\t\t</div>\n\t\t\t</article>\n\t\t)\n\t}\n\n\tonSubmitUpdate = () => {\n\t\tconst { user } = this.props\n\t\tlet {nameInput, emailInput, ageInput} = this.state\n\t\tif(nameInput === '') nameInput = user.name\n\t\tif(emailInput === '') emailInput = user.email\n\t\tif(ageInput === '') ageInput = user.age\n\t\tfetch(`https://blech-task-manager.herokuapp.com/users/me`, {\n\t\t\tmethod: 'PATCH',\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json; charset=UTF-8',\n\t\t\t\tAuthorization: `Bearer ${user.token}`\n\t\t\t},\n\n\t\t\tbody: JSON.stringify({\n\t\t\t\tname: nameInput,\n\t\t\t\temail: emailInput,\n\t\t\t\tage: ageInput\n\t\t\t})\n\t\t})\n\t\t.then(response=> response.json())\n\t\t.then(jsonData=> {\n\t\t\tif (jsonData._id) {\n\t\t\t\tconsole.log(jsonData)\n\t\t\t\tthis.props.loadUser(jsonData, user.token)\n\t\t\t\tthis.setState({showEditUser: false})\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif(jsonData.errors.email) {\n\t\t\t\t\tthis.setState({emailErrorMessage:jsonData.errors.email.message})\n\t\t\t\t}\n\t\t\t\tif(jsonData.errors.age) {\n\t\t\t\t\tthis.setState({ageErrorMessage:'Age must be a number'})\n\t\t\t\t}\n\t\t\t\tconsole.log(jsonData.errors)\n\t\t\t}\n\t\t})\n\t}\n\n\tshowUserEditForm = () => {\n\t\tconst {user} = this.props\n\t\t\n\t\treturn (\n\t\t\t<div className=\"pa4 black-80 flex justify-center\">\n\t\t\t  <div className=\"measure\">\n\t\t\t    <label form=\"userDetails\" className=\"f6 b db mb2\">Update User</label>\n\t\t\t    <input \n\t\t\t    id=\"name123\" \n\t\t\t    className=\"input-reset ba b--black-20 pa2 mb2 db w-100\" \n\t\t\t    type=\"text\" \n\t\t\t    onChange={this.onNameChange}\n\t\t\t    placeholder={user.name}\n\t\t\t    />\n\t\t\t    <input \n\t\t\t    id=\"email\" \n\t\t\t    className=\"input-reset ba b--black-20 pa2 mb2 db w-100\" \n\t\t\t    type=\"text\" \n\t\t\t    onChange={this.onEmailChange}\n\t\t\t    placeholder={user.email}\n\t\t\t    />\n\t\t\t    <input \n\t\t\t    id=\"age\" \n\t\t\t    className=\"input-reset ba b--black-20 pa2 mb2 db w-100\" \n\t\t\t    type=\"text\" \n\t\t\t    onChange={this.onAgeChange}\n\t\t\t    placeholder={user.age}\n\t\t\t    />\n\t\t\t    <button\n\t\t\t    className='ph3 link dim f6 ph3 pv2 mb2 dib white bg-navy'\n\t\t\t    type='update'\n\t\t\t    onClick={() => this.onSubmitUpdate()}\n\t\t\t    >Update</button>\n\t\t\t    <h6 className='red pa0 black-80'>{this.state.emailErrorMessage}</h6>\n\t\t\t  \t<h6 className='red pa0'>{this.state.ageErrorMessage}</h6>\n\t\t\t  </div>  \t\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {user} = this.props\n\t\treturn (\n\t\t<div>\n\t\t\t{\n\t\t\t\t(this.state.showEditUser)\n\t\t\t\t?\n\t\t\t\tthis.showUserEditForm()\n\t\t\t\t:\n\t\t\t\tthis.showUserDetails()\n\t\t\t}\n\t\t\t<Photo user={user}/>\n\t\t\t<br />\n\t\t\t<Tasks user={user}/>\n\t\t\t<div>\n\t\t\t\t<button className='w-30 grow f4 link ph3 pv dib white bg-light-purple'\n\t\t\t\tonClick= {this.deleteUser}\n\t\t\t\t>Delete User</button>\n\t\t\t</div>\n\n\n\t\t</div>\n\t\t);\n\t}\n\t\n\t\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}